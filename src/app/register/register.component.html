<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<!-- Botón de volver FUERA del container -->
<div class="position-absolute top-0 start-0 p-3">
  <i class="bi bi-arrow-left-circle-fill fs-2 text-primary" style="cursor: pointer;" (click)="volver()" title="Volver"></i>
</div>

<!-- Container principal -->
<div class="container d-flex justify-content-center align-items-center vh-100 bg-light">
  <div class="card p-4 shadow-lg border-0" style="max-width: 400px; width: 100%;">
    <div class="text-center mb-4">
      <i class="bi bi-person-plus-fill text-primary" style="font-size: 3rem;"></i>
      <h2 class="mt-2 mb-0 fw-bold">Registro</h2>
      <p class="text-secondary mb-0">Crea tu cuenta en Viam</p>
    </div>
    <form [formGroup]="formularioRegistro" (ngSubmit)="registrar()" novalidate>
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-person"></i></span>
          <input id="nombre" type="text" class="form-control"
                 formControlName="nombre"
                 [class.is-invalid]="formularioRegistro.get('nombre')?.invalid && (formularioRegistro.get('nombre')?.touched || formularioRegistro.get('nombre')?.dirty)" />
          <div class="invalid-feedback"
               *ngIf="formularioRegistro.get('nombre')?.errors && (formularioRegistro.get('nombre')?.touched || formularioRegistro.get('nombre')?.dirty)">
            <span *ngIf="formularioRegistro.get('nombre')?.errors?.['required']">El nombre es obligatorio.</span>
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Correo electrónico</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-envelope"></i></span>
          <input id="email" type="email" class="form-control"
                 formControlName="email"
                 [class.is-invalid]="formularioRegistro.get('email')?.invalid && (formularioRegistro.get('email')?.touched || formularioRegistro.get('email')?.dirty)" />
          <div class="invalid-feedback"
               *ngIf="formularioRegistro.get('email')?.errors && (formularioRegistro.get('email')?.touched || formularioRegistro.get('email')?.dirty)">
            <span *ngIf="formularioRegistro.get('email')?.errors?.['required']">El correo es obligatorio.</span>
            <span *ngIf="formularioRegistro.get('email')?.errors?.['email']">Ingresa un correo válido.</span>
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-lock"></i></span>
          <input id="password" type="password" class="form-control"
                 formControlName="password"
                 [class.is-invalid]="formularioRegistro.get('password')?.invalid && (formularioRegistro.get('password')?.touched || formularioRegistro.get('password')?.dirty)" />
          <div class="invalid-feedback"
               *ngIf="formularioRegistro.get('password')?.errors && (formularioRegistro.get('password')?.touched || formularioRegistro.get('password')?.dirty)">
            <span *ngIf="formularioRegistro.get('password')?.errors?.['required']">La contraseña es obligatoria.</span>
            <span *ngIf="formularioRegistro.get('password')?.errors?.['minlength']">Mínimo 6 caracteres.</span>
          </div>
        </div>
      </div>

      <div class="mb-4">
        <label for="rol" class="form-label">Rol</label>
        <div class="input-group has-validation">
          <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
          <select id="rol" class="form-select"
                  formControlName="rol"
                  [class.is-invalid]="formularioRegistro.get('rol')?.invalid && (formularioRegistro.get('rol')?.touched || formularioRegistro.get('rol')?.dirty)">
            <option value="usuario">Usuario</option>
            <option value="instructor">Instructor</option>
          </select>
          <div class="invalid-feedback"
               *ngIf="formularioRegistro.get('rol')?.errors && (formularioRegistro.get('rol')?.touched || formularioRegistro.get('rol')?.dirty)">
            <span *ngIf="formularioRegistro.get('rol')?.errors?.['required']">Selecciona un rol.</span>
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100 d-flex align-items-center justify-content-center gap-2">
        <i class="bi bi-person-plus"></i> Registrarse
      </button>
    </form>
  </div>
</div>
